tests:
  - description: "Root project should be multiplatform"
    configuration:
      tasks: ":tasks"
      options:
        - "--stacktrace"
        - "--info"
    expectation:
      success: ':tasks'
      output_contains:
        - Tasks runnable from root project 'test0'
  - description: "Print properties explanation"
    configuration:
      tasks: ":full:explainProperties"
      options:
        - "--stacktrace"
    expectation:
      success: ':full:explainProperties'
  - description: "Full test"
    configuration:
      tasks: ":full:test"
      options:
        - "--stacktrace"
    expectation:
      success:
        - ":full:test"
  - description: "Upload to Maven implies sources and javadoc being generated"
    configuration:
      tasks: "publishToMavenLocal"
      options:
        - "--stacktrace"
    expectation:
      success:
        - ":subproject-jvm:publishToMavenLocal"
        - ":subproject-js:publishToMavenLocal"
        - ":subproject-mp:publishToMavenLocal"
        - ":full:publishToMavenLocal"
      # find build/.m2 -type f -wholename '*'
      file_exists:

        - name: build/.m2/repository/io/github/gciatto/example/full/1.0.0/full-1.0.0-sources.jar
        - name: build/.m2/repository/io/github/gciatto/example/full/1.0.0/full-1.0.0-sources.jar.asc
        - name: build/.m2/repository/io/github/gciatto/example/full/1.0.0/full-1.0.0.jar
        - name: build/.m2/repository/io/github/gciatto/example/full/1.0.0/full-1.0.0.jar.asc
        - name: build/.m2/repository/io/github/gciatto/example/full/1.0.0/full-1.0.0.pom
        - name: build/.m2/repository/io/github/gciatto/example/full/1.0.0/full-1.0.0.pom.asc
        #
        - name: build/.m2/repository/io/github/gciatto/example/full-js/1.0.0/full-js-1.0.0-sources.jar
        - name: build/.m2/repository/io/github/gciatto/example/full-js/1.0.0/full-js-1.0.0-sources.jar.asc
        - name: build/.m2/repository/io/github/gciatto/example/full-js/1.0.0/full-js-1.0.0.pom
        - name: build/.m2/repository/io/github/gciatto/example/full-js/1.0.0/full-js-1.0.0.pom.asc
        #
        - name: build/.m2/repository/io/github/gciatto/example/full-jvm/1.0.0/full-jvm-1.0.0-sources.jar
        - name: build/.m2/repository/io/github/gciatto/example/full-jvm/1.0.0/full-jvm-1.0.0-sources.jar.asc
        - name: build/.m2/repository/io/github/gciatto/example/full-jvm/1.0.0/full-jvm-1.0.0.jar
        - name: build/.m2/repository/io/github/gciatto/example/full-jvm/1.0.0/full-jvm-1.0.0.jar.asc
        - name: build/.m2/repository/io/github/gciatto/example/full-jvm/1.0.0/full-jvm-1.0.0.pom
        - name: build/.m2/repository/io/github/gciatto/example/full-jvm/1.0.0/full-jvm-1.0.0.pom.asc
        #
        - name: build/.m2/repository/io/github/gciatto/example/subproject-js/1.0.0/subproject-js-1.0.0.pom
        - name: build/.m2/repository/io/github/gciatto/example/subproject-js/1.0.0/subproject-js-1.0.0.pom.asc
        #
        - name: build/.m2/repository/io/github/gciatto/example/subproject-jvm/1.0.0/subproject-jvm-1.0.0-sources.jar
        - name: build/.m2/repository/io/github/gciatto/example/subproject-jvm/1.0.0/subproject-jvm-1.0.0-sources.jar.asc
        - name: build/.m2/repository/io/github/gciatto/example/subproject-jvm/1.0.0/subproject-jvm-1.0.0.jar
        - name: build/.m2/repository/io/github/gciatto/example/subproject-jvm/1.0.0/subproject-jvm-1.0.0.jar.asc
        - name: build/.m2/repository/io/github/gciatto/example/subproject-jvm/1.0.0/subproject-jvm-1.0.0.pom
        - name: build/.m2/repository/io/github/gciatto/example/subproject-jvm/1.0.0/subproject-jvm-1.0.0.pom.asc
        #
        - name: build/.m2/repository/io/github/gciatto/example/subproject-mp/1.0.0/subproject-mp-1.0.0-sources.jar
        - name: build/.m2/repository/io/github/gciatto/example/subproject-mp/1.0.0/subproject-mp-1.0.0-sources.jar.asc
        - name: build/.m2/repository/io/github/gciatto/example/subproject-mp/1.0.0/subproject-mp-1.0.0.jar
        - name: build/.m2/repository/io/github/gciatto/example/subproject-mp/1.0.0/subproject-mp-1.0.0.jar.asc
        - name: build/.m2/repository/io/github/gciatto/example/subproject-mp/1.0.0/subproject-mp-1.0.0.pom
        - name: build/.m2/repository/io/github/gciatto/example/subproject-mp/1.0.0/subproject-mp-1.0.0.pom.asc
        #
        - name: build/.m2/repository/io/github/gciatto/example/subproject-mp-js/1.0.0/subproject-mp-js-1.0.0-sources.jar
        - name: build/.m2/repository/io/github/gciatto/example/subproject-mp-js/1.0.0/subproject-mp-js-1.0.0-sources.jar.asc
        - name: build/.m2/repository/io/github/gciatto/example/subproject-mp-js/1.0.0/subproject-mp-js-1.0.0.pom
        - name: build/.m2/repository/io/github/gciatto/example/subproject-mp-js/1.0.0/subproject-mp-js-1.0.0.pom.asc
        #
        - name: build/.m2/repository/io/github/gciatto/example/subproject-mp-jvm/1.0.0/subproject-mp-jvm-1.0.0-sources.jar
        - name: build/.m2/repository/io/github/gciatto/example/subproject-mp-jvm/1.0.0/subproject-mp-jvm-1.0.0-sources.jar.asc
        - name: build/.m2/repository/io/github/gciatto/example/subproject-mp-jvm/1.0.0/subproject-mp-jvm-1.0.0.jar
        - name: build/.m2/repository/io/github/gciatto/example/subproject-mp-jvm/1.0.0/subproject-mp-jvm-1.0.0.jar.asc
        - name: build/.m2/repository/io/github/gciatto/example/subproject-mp-jvm/1.0.0/subproject-mp-jvm-1.0.0.pom
        - name: build/.m2/repository/io/github/gciatto/example/subproject-mp-jvm/1.0.0/subproject-mp-jvm-1.0.0.pom.asc
